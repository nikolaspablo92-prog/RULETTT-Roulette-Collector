@echo off
title RULETTT - –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ ngrok
color 0A

echo.
echo ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
echo ‚ïë           üé≤ RULETTT - –ü–£–ë–õ–ò–ß–ù–´–ô –ó–ê–ü–£–°–ö üåê           ‚ïë
echo ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
echo.

REM –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Å–µ—Ä–≤–µ—Ä—ã –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã
echo ‚ö° –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤...
netstat -an | find "5000" >nul
if %ERRORLEVEL% EQU 0 (
    echo ‚úÖ API —Å–µ—Ä–≤–µ—Ä —É–∂–µ –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 5000
) else (
    echo üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º API —Å–µ—Ä–≤–µ—Ä...
    start "RULETTT API Server" /MIN C:/Users/Pablo/RULETTT/Scripts/python.exe api_server.py
    timeout /t 3 /nobreak >nul
)

netstat -an | find "8080" >nul  
if %ERRORLEVEL% EQU 0 (
    echo ‚úÖ –í–µ–±-—Å–µ—Ä–≤–µ—Ä —É–∂–µ –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 8080
) else (
    echo üåê –ó–∞–ø—É—Å–∫–∞–µ–º –≤–µ–±-—Å–µ—Ä–≤–µ—Ä...
    cd /d "C:\Users\Pablo\RULETTT\webapp"
    start "RULETTT Web Server" /MIN C:/Users/Pablo/RULETTT/Scripts/python.exe -m http.server 8080
    cd /d "C:\Users\Pablo\RULETTT"
    timeout /t 5 /nobreak >nul
)

REM –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫—É ngrok
if not exist "ngrok.yml" (
    echo ‚ùå –§–∞–π–ª ngrok.yml –Ω–µ –Ω–∞–π–¥–µ–Ω!
    echo üìã –°–Ω–∞—á–∞–ª–∞ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ ngrok –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ NGROK_SETUP_GUIDE.md
    pause
    exit /b 1
)

REM –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ —Ç–æ–∫–µ–Ω
findstr "YOUR_NGROK_TOKEN" ngrok.yml >nul
if %ERRORLEVEL% EQU 0 (
    echo ‚ùå –¢–æ–∫–µ–Ω ngrok –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω!
    echo.
    echo üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ:
    echo 1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://ngrok.com
    echo 2. –ü–æ–ª—É—á–∏—Ç–µ authtoken –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ  
    echo 3. –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_NGROK_TOKEN –≤ ngrok.yml –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω
    echo 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–Ω–æ–≤–∞
    echo.
    pause
    exit /b 1
)

echo.
echo üåç –°–æ–∑–¥–∞–µ–º –ø—É–±–ª–∏—á–Ω—ã–µ —Ç—É–Ω–Ω–µ–ª–∏ —á–µ—Ä–µ–∑ ngrok...
echo ‚è≥ –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 10-15 —Å–µ–∫—É–Ω–¥...
echo.

REM –ó–∞–ø—É—Å–∫ ngrok
ngrok start --config ngrok.yml --all

REM –ï—Å–ª–∏ –¥–æ—à–ª–∏ —Å—é–¥–∞, –∑–Ω–∞—á–∏—Ç ngrok –∑–∞–≤–µ—Ä—à–∏–ª—Å—è
echo.
echo ‚ö†Ô∏è  ngrok –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É
echo üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
echo.
pause