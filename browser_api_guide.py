"""
–ü–û–®–ê–ì–û–í–´–ô –ì–ê–ô–î: –ü–û–ò–°–ö API –ß–ï–†–ï–ó –ö–û–ù–°–û–õ–¨ –ë–†–ê–£–ó–ï–†–ê
===============================================

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø–æ–º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ API –∫–∞–∑–∏–Ω–æ —á–µ—Ä–µ–∑ –∞–Ω–∞–ª–∏–∑ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞
–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏—Å—Ç–µ–º—É.
"""

import json
import os
from datetime import datetime
from pathlib import Path

class BrowserAPIGuide:
    """–ì–∞–π–¥ –ø–æ –ø–æ–∏—Å–∫—É API —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä"""
    
    def __init__(self):
        self.found_apis = []
        self.casino_config = {}
    
    def run_guide(self):
        """–ó–∞–ø—É—Å–∫ –ø–æ—à–∞–≥–æ–≤–æ–≥–æ –≥–∞–π–¥–∞"""
        print("üïµÔ∏è –ü–û–ò–°–ö API –ß–ï–†–ï–ó –ö–û–ù–°–û–õ–¨ –ë–†–ê–£–ó–ï–†–ê")
        print("=" * 45)
        print("–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è –ø–æ–∏—Å–∫–∞ API –≤–∞—à–µ–≥–æ –∫–∞–∑–∏–Ω–æ\n")
        
        self.step_1_preparation()
        self.step_2_browser_setup()
        self.step_3_traffic_analysis()
        self.step_4_api_identification()
        self.step_5_configuration()
        self.step_6_testing()
    
    def step_1_preparation(self):
        """–®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞"""
        print("üìã –®–ê–ì 1: –ü–û–î–ì–û–¢–û–í–ö–ê")
        print("-" * 25)
        print("""
1. –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–∑–∏–Ω–æ —Å live-—Ä—É–ª–µ—Ç–∫–æ–π
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç (–∏–ª–∏ –º–æ–∂–µ—Ç–µ –∏–≥—Ä–∞—Ç—å –≤ –¥–µ–º–æ)
3. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –±—Ä–∞—É–∑–µ—Ä (Chrome/Firefox/Edge)

–õ–£–ß–®–ò–ï –ö–ê–ù–î–ò–î–ê–¢–´:
‚Ä¢ –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã–µ –∫–∞–∑–∏–Ω–æ (Stake, BC.Game, Roobet)
‚Ä¢ –ö–∞–∑–∏–Ω–æ —Å Evolution Gaming
‚Ä¢ –ö–∞–∑–∏–Ω–æ —Å –¥–µ–º–æ-—Ä–µ–∂–∏–º–æ–º
        """)
        
        casino_url = input("–í–≤–µ–¥–∏—Ç–µ URL –∫–∞–∑–∏–Ω–æ —Å live-—Ä—É–ª–µ—Ç–∫–æ–π: ").strip()
        if casino_url:
            self.casino_config['casino_url'] = casino_url
            print(f"‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∫–∞–∑–∏–Ω–æ: {casino_url}")
        
        input("\n–ù–∞–∂–º–∏—Ç–µ Enter –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ã –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É...")
    
    def step_2_browser_setup(self):
        """–®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞"""
        print("\nüåê –®–ê–ì 2: –ù–ê–°–¢–†–û–ô–ö–ê –ë–†–ê–£–ó–ï–†–ê")
        print("-" * 30)
        print("""
–ò–ù–°–¢–†–£–ö–¶–ò–ò:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ Chrome)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É live-—Ä—É–ª–µ—Ç–∫–∏
3. –ù–∞–∂–º–∏—Ç–µ F12 (–∏–ª–∏ Ctrl+Shift+I)
4. –í Developer Tools –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Network" (–°–µ—Ç—å)
5. –í–ê–ñ–ù–û: –ü–æ—Å—Ç–∞–≤—å—Ç–µ —Ñ–∏–ª—å—Ç—Ä "XHR" –∏–ª–∏ "Fetch"

–°–ö–†–ò–ù–®–û–¢ –ö–û–ù–°–û–õ–ò:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Elements Console Sources Network    ‚îÇ <- –í–∫–ª–∞–¥–∫–∏
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚óã All JS CSS XHR Fetch WS Other     ‚îÇ <- –§–∏–ª—å—Ç—Ä—ã (–≤—ã–±–µ—Ä–∏—Ç–µ XHR)
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Name         Status  Type    Size   ‚îÇ
‚îÇ ...                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ù–ê–°–¢–†–û–ô–ö–ò –§–ò–õ–¨–¢–†–ê:
‚Ä¢ –í–∫–ª—é—á–∏—Ç–µ "XHR" - —ç—Ç–æ AJAX –∑–∞–ø—Ä–æ—Å—ã
‚Ä¢ –í–∫–ª—é—á–∏—Ç–µ "Fetch" - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã  
‚Ä¢ –û—Ç–∫–ª—é—á–∏—Ç–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã
        """)
        
        ready = input("–ì–æ—Ç–æ–≤–æ? –ö–æ–Ω—Å–æ–ª—å –æ—Ç–∫—Ä—ã—Ç–∞, —Ñ–∏–ª—å—Ç—Ä XHR –≤–∫–ª—é—á–µ–Ω? (y/n): ").lower()
        if ready == 'y':
            print("‚úÖ –ë—Ä–∞—É–∑–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω")
        else:
            print("‚ö†Ô∏è –í–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º")
        
        input("\n–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è...")
    
    def step_3_traffic_analysis(self):
        """–®–∞–≥ 3: –ê–Ω–∞–ª–∏–∑ —Ç—Ä–∞—Ñ–∏–∫–∞"""
        print("\nüìä –®–ê–ì 3: –ê–ù–ê–õ–ò–ó –°–ï–¢–ï–í–û–ì–û –¢–†–ê–§–ò–ö–ê")
        print("-" * 35)
        print("""
–î–ï–ô–°–¢–í–ò–Ø –í –ë–†–ê–£–ó–ï–†–ï:

1. ‚ñ∂Ô∏è –ó–ê–ü–£–°–¢–ò–¢–ï –ú–û–ù–ò–¢–û–†–ò–ù–ì:
   ‚Ä¢ –í Network tab –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –∑–∞–ø–∏—Å–∏ (–∫—Ä–∞—Å–Ω—ã–π –∫—Ä—É–∂–æ–∫)
   ‚Ä¢ –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞—á–Ω–∏—Ç–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —Å–∞–π—Ç–æ–º

2. üé∞ –í–ó–ê–ò–ú–û–î–ï–ô–°–¢–í–£–ô–¢–ï –° –†–£–õ–ï–¢–ö–û–ô:
   ‚Ä¢ –ó–∞–π–¥–∏—Ç–µ –≤ live-—Ä—É–ª–µ—Ç–∫—É
   ‚Ä¢ –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–∏–Ω–æ–≤
   ‚Ä¢ –ï—Å–ª–∏ –º–æ–∂–µ—Ç–µ - —Å–¥–µ–ª–∞–π—Ç–µ —Å—Ç–∞–≤–∫—É
   ‚Ä¢ –ù–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

3. üîç –ù–ê–ë–õ–Æ–î–ê–ô–¢–ï –ó–ê –ó–ê–ü–†–û–°–ê–ú–ò:
   –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è –∑–∞–ø—Ä–æ—Å—ã.
   –ò–©–ò–¢–ï –∑–∞–ø—Ä–æ—Å—ã —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ —Å–æ–¥–µ—Ä–∂–∞—â–∏–º–∏:
   ‚Ä¢ "roulette", "live", "game", "result"
   ‚Ä¢ "history", "spin", "wheel", "bet"
   ‚Ä¢ —á–∏—Å–ª–æ–≤—ã–µ ID –∏–ª–∏ –∫–æ–¥—ã –∏–≥—Ä

–ü–†–ò–ú–ï–† —Ç–æ–≥–æ —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ live_game_data    200  xhr  1.2kb   ‚îÇ ‚Üê –•–û–†–û–®–û!
‚îÇ roulette_results  200  xhr  856b    ‚îÇ ‚Üê –û–¢–õ–ò–ß–ù–û!
‚îÇ api/games/12345   200  xhr  2.1kb   ‚îÇ ‚Üê –í–û–ó–ú–û–ñ–ù–û
‚îÇ websocket         101  ws   -       ‚îÇ ‚Üê WebSocket
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        """)
        
        input("–ü–æ–Ω–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ —Ç—Ä–∞—Ñ–∏–∫–æ–º 2-3 –º–∏–Ω—É—Ç—ã, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ Enter...")
        
        # –°–æ–±–∏—Ä–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        print("\nüéØ –ß–¢–û –í–´ –ù–ê–®–õ–ò?")
        print("–ü–µ—Ä–µ—á–∏—Å–ª–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ —Å—Ç—Ä–æ–∫—É, Enter –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è):")
        
        found_requests = []
        while True:
            request = input("–ó–∞–ø—Ä–æ—Å (–∏–ª–∏ Enter –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è): ").strip()
            if not request:
                break
            found_requests.append(request)
        
        if found_requests:
            self.found_apis = found_requests
            print(f"‚úÖ –ó–∞–ø–∏—Å–∞–Ω–æ {len(found_requests)} –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤")
        else:
            print("‚ö†Ô∏è –ó–∞–ø—Ä–æ—Å—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã")
    
    def step_4_api_identification(self):
        """–®–∞–≥ 4: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è API"""
        print("\nüîç –®–ê–ì 4: –ê–ù–ê–õ–ò–ó –ù–ê–ô–î–ï–ù–ù–´–• –ó–ê–ü–†–û–°–û–í")
        print("-" * 38)
        
        if not self.found_apis:
            print("‚ùå –ù–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞")
            return
        
        print("–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:")
        print("""
–ò–ù–°–¢–†–£–ö–¶–ò–ò:
1. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∑–∞–ø—Ä–æ—Å –≤ Network tab
2. –°–ø—Ä–∞–≤–∞ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–∞–Ω–µ–ª—å —Å –¥–µ—Ç–∞–ª—è–º–∏
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
   ‚Ä¢ Request URL (–ø–æ–ª–Ω—ã–π URL)
   ‚Ä¢ Method (GET/POST)
   ‚Ä¢ Response (–æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞)

–ü–†–ò–ú–ï–† –∞–Ω–∞–ª–∏–∑–∞:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Request URL:    ‚îÇ
‚îÇ https://...     ‚îÇ ‚Üê –°–ö–û–ü–ò–†–£–ô–¢–ï –≠–¢–û
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  
‚îÇ Request Method: ‚îÇ
‚îÇ GET             ‚îÇ ‚Üê –ò –≠–¢–û
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Response:       ‚îÇ
‚îÇ {"numbers":...} ‚îÇ ‚Üê –ò –≠–¢–û (–µ—Å–ª–∏ JSON)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        """)
        
        api_details = []
        
        for i, request in enumerate(self.found_apis, 1):
            print(f"\nüìã –ó–ê–ü–†–û–° {i}: {request}")
            
            url = input("  –ü–æ–ª–Ω—ã–π URL: ").strip()
            method = input("  Method (GET/POST/...): ").strip().upper() or "GET"
            
            print("  –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–ø–µ—Ä–≤—ã–µ 200 —Å–∏–º–≤–æ–ª–æ–≤):")
            response = input("  Response: ").strip()
            
            has_roulette_data = input("  –°–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ —Ä—É–ª–µ—Ç–∫–∏? (y/n): ").lower() == 'y'
            
            api_details.append({
                'name': request,
                'url': url,
                'method': method,
                'response_preview': response[:200],
                'has_roulette_data': has_roulette_data
            })
        
        # –§–∏–ª—å—Ç—Ä—É–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–µ API
        good_apis = [api for api in api_details if api['has_roulette_data']]
        
        if good_apis:
            print(f"\nüéØ –ù–ê–ô–î–ï–ù–û {len(good_apis)} –ü–û–î–•–û–î–Ø–©–ò–• API:")
            for api in good_apis:
                print(f"  ‚úÖ {api['name']}: {api['url']}")
            self.casino_config['apis'] = good_apis
        else:
            print("üòû –ü–æ–¥—Ö–æ–¥—è—â–∏–µ API –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")
    
    def step_5_configuration(self):
        """–®–∞–≥ 5: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"""
        print("\n‚öôÔ∏è –®–ê–ì 5: –°–û–ó–î–ê–ù–ò–ï –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò")
        print("-" * 32)
        
        if not self.casino_config.get('apis'):
            print("‚ùå –ù–µ—Ç API –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏")
            self.manual_config_fallback()
            return
        
        # –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
        config = {
            'casino_name': input("–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–∑–∏–Ω–æ: ").strip() or "Unknown Casino",
            'connection_method': 'api',
            'api': {
                'base_url': self.extract_base_url(self.casino_config['apis'][0]['url']),
                'endpoints': {},
                'headers': {
                    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
                    'Accept': 'application/json'
                }
            },
            'betting': {
                'base_bet': 100,
                'max_bet': 10000,
                'bankroll': 100000
            },
            'safety': {
                'enabled': True,
                'max_daily_loss': 50000
            }
        }
        
        # –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞–π–¥–µ–Ω–Ω—ã–µ endpoints
        for api in self.casino_config['apis']:
            endpoint_name = input(f"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è {api['name']} (live_results/history/...): ").strip()
            if endpoint_name:
                config['api']['endpoints'][endpoint_name] = self.extract_endpoint(api['url'])
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
        self.save_config(config)
        print("‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")
    
    def manual_config_fallback(self):
        """–†–µ–∑–µ—Ä–≤–Ω–∞—è —Ä—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞"""
        print("\nüõ†Ô∏è –†–ï–ó–ï–†–í–ù–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê")
        print("-" * 20)
        print("–°–æ–∑–¥–∞–µ–º –±–∞–∑–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö")
        
        config = {
            'casino_name': input("–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–∑–∏–Ω–æ: ").strip() or "Manual Casino",
            'connection_method': 'manual',
            'betting': {
                'base_bet': 100,
                'max_bet': 10000, 
                'bankroll': 100000
            }
        }
        
        self.save_config(config)
        print("‚úÖ –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞")
    
    def step_6_testing(self):
        """–®–∞–≥ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ"""
        print("\nüß™ –®–ê–ì 6: –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ù–ê–°–¢–†–û–ô–ö–ò")
        print("-" * 30)
        
        print("–¢–µ–ø–µ—Ä—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:")
        
        test_choice = input("–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è? (y/n): ").lower()
        if test_choice == 'y':
            self.run_connection_test()
        
        print("\nüéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:")
        print("1. python test_connection.py - –¥–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞")
        print("2. python src/main.py - –∑–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã")
        print("3. –í—ã–±–µ—Ä–∏—Ç–µ '–ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ' –≤ –º–µ–Ω—é")
        
        print("\nüéâ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")
    
    def extract_base_url(self, url):
        """–ò–∑–≤–ª–µ—á—å –±–∞–∑–æ–≤—ã–π URL"""
        if '://' in url:
            protocol_and_domain = url.split('/')[:3]
            return '/'.join(protocol_and_domain)
        return url
    
    def extract_endpoint(self, url):
        """–ò–∑–≤–ª–µ—á—å endpoint –∏–∑ URL"""
        if '://' in url:
            parts = url.split('/')
            if len(parts) > 3:
                return '/' + '/'.join(parts[3:])
        return url
    
    def save_config(self, config):
        """–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é"""
        try:
            config_path = Path(__file__).parent / "casino_setup.json"
            with open(config_path, 'w', encoding='utf-8') as f:
                json.dump(config, f, indent=2, ensure_ascii=False)
            print(f"üíæ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ {config_path}")
        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: {e}")
    
    def run_connection_test(self):
        """–ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"""
        print("\nüîó –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è...")
        
        try:
            # –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
            config_path = Path(__file__).parent / "casino_setup.json"
            if config_path.exists():
                with open(config_path, 'r', encoding='utf-8') as f:
                    config = json.load(f)
                
                print(f"‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞")
                print(f"   –ö–∞–∑–∏–Ω–æ: {config.get('casino_name')}")
                print(f"   –ú–µ—Ç–æ–¥: {config.get('connection_method')}")
                
                if config.get('connection_method') == 'api':
                    endpoints = config.get('api', {}).get('endpoints', {})
                    print(f"   API endpoints: {len(endpoints)}")
                    for name, endpoint in endpoints.items():
                        print(f"     ‚Ä¢ {name}: {endpoint}")
                
                print("‚úÖ –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞")
            else:
                print("‚ùå –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
                
        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: {e}")


def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è"""
    try:
        guide = BrowserAPIGuide()
        guide.run_guide()
        
    except KeyboardInterrupt:
        print("\n\nüëã –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–µ—Ä–≤–∞–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º")
    except Exception as e:
        print(f"\n‚ùå –û—à–∏–±–∫–∞: {e}")


if __name__ == "__main__":
    main()